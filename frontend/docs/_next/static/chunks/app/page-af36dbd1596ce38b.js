(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var n=t(5155),a=t(2115),l=t(6710),r=t(3464);function i(){let[e,s]=(0,a.useState)(!1),[t,i]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),[x,h]=(0,a.useState)([]),[u,g]=(0,a.useState)(null),[b,p]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[f,D]=(0,a.useState)([]),[y,v]=(0,a.useState)(!1),[_,w]=(0,a.useState)("http://localhost:8000");(0,a.useEffect)(()=>{{let e=window.location.hostname;"localhost"===e||"127.0.0.1"===e?w("http://localhost:8000"):w("http://".concat(e,":8000"))}},[]),(0,a.useEffect)(()=>{k();let e=setInterval(C,3e3);return()=>clearInterval(e)},[]);let k=async()=>{try{let e=await r.A.get("".concat(_,"/plans"));h(e.data)}catch(e){console.error("Fehler beim Laden der Pl\xe4ne:",e)}},C=async()=>{if(u)try{let e=await r.A.get("".concat(_,"/din-check-status/").concat(u));e.data.has_din_check&&(g(null),await k(),t&&t.id===u&&i({...t,din_check:e.data.din_check,status:"din_checked"}))}catch(e){console.error("Fehler beim Pr\xfcfen des Status:",e)}},A=(0,a.useCallback)(async e=>{if(0===e.length)return;let t=e[0];if(y)return void await P(e);s(!0),m(null),i(null);let n=new FormData;n.append("file",t);try{let e=await r.A.post("".concat(_,"/upload-plan"),n,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4});i(e.data),await k()}catch(e){if("ECONNREFUSED"===e.code)m('Backend nicht erreichbar. Bitte starten Sie das Backend mit "python main.py"');else{var a,l;m((null==(l=e.response)||null==(a=l.data)?void 0:a.detail)||e.message||"Upload fehlgeschlagen")}}finally{s(!1)}},[y,_]),I=async e=>{g(e);try{await r.A.post("".concat(_,"/check-against-din/").concat(e),{},{timeout:18e4})}catch(e){var s,t;m("DIN-Pr\xfcfung fehlgeschlagen: "+((null==(t=e.response)||null==(s=t.data)?void 0:s.detail)||e.message)),g(null)}},S=async(e,s)=>{try{await r.A.post("".concat(_,"/add-feedback/").concat(e),s),N(null),await k(),alert("Feedback erfolgreich gespeichert!")}catch(e){var t,n;m("Feedback konnte nicht gespeichert werden: "+((null==(n=e.response)||null==(t=n.data)?void 0:t.detail)||e.message))}},F=async e=>{if(confirm("Plan wirklich l\xf6schen?"))try{await r.A.delete("".concat(_,"/plan/").concat(e)),await k(),t&&t.id===e&&i(null)}catch(e){var s,n;m("Plan konnte nicht gel\xf6scht werden: "+((null==(n=e.response)||null==(s=n.data)?void 0:s.detail)||e.message))}},E=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},B=async()=>{try{let e=await r.A.get("".concat(_,"/din-norms"));console.log("DIN-Normen Response:",e.data),D(e.data.norms||[])}catch(e){console.error("Fehler beim Laden der DIN-Normen:",e),console.error("API URL:",_)}},P=async e=>{if(0===e.length)return;let t=e[0],n=new FormData;n.append("file",t);try{s(!0);let e=await r.A.post("".concat(_,"/upload-din-norm"),n,{headers:{"Content-Type":"multipart/form-data"}});alert("✅ DIN-Norm erfolgreich hochgeladen: ".concat(e.data.chunks_processed," Textbl\xf6cke verarbeitet")),B()}catch(e){console.error("DIN-Upload Fehler:",e),alert("❌ DIN-Upload fehlgeschlagen")}finally{s(!1)}},z=async e=>{if(confirm('DIN-Norm "'.concat(e,'" wirklich l\xf6schen?')))try{await r.A.delete("".concat(_,"/din-norm/").concat(e)),alert("✅ DIN-Norm gel\xf6scht"),B()}catch(e){console.error("L\xf6schen fehlgeschlagen:",e),alert("❌ L\xf6schen fehlgeschlagen")}};(0,a.useEffect)(()=>{_&&B()},[_]);let{getRootProps:L,getInputProps:U,isDragActive:K}=(0,l.VB)({onDrop:A,accept:{"application/pdf":[".pdf"]},multiple:!1,maxSize:0x3200000});return(0,n.jsx)("main",{className:"min-h-screen p-8 bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)("div",{className:"text-center mb-12",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-4 text-gray-800",children:"\uD83C\uDFD7️ Bauplan-Checker System"}),(0,n.jsx)("p",{className:"text-lg text-gray-600",children:"Automatische Pr\xfcfung von Baupl\xe4nen gegen DIN-Normen mit KI-Unterst\xfctzung"})]}),(0,n.jsx)("div",{className:"flex justify-center mb-8",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-1 shadow-md",children:[(0,n.jsx)("button",{onClick:()=>v(!1),className:"px-6 py-2 rounded-lg font-medium transition-colors ".concat(y?"text-gray-600 hover:text-blue-500":"bg-blue-500 text-white shadow-md"),children:"\uD83D\uDCCB Bauplan pr\xfcfen"}),(0,n.jsxs)("button",{onClick:()=>v(!0),className:"px-6 py-2 rounded-lg font-medium transition-colors ".concat(y?"bg-green-500 text-white shadow-md":"text-gray-600 hover:text-green-500"),children:["\uD83D\uDCDA DIN-Normen verwalten (",f.length,")"]})]})}),y&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-green-700",children:"\uD83D\uDCDA DIN-Normen Verwaltung"}),(0,n.jsxs)("div",{...L(),className:"border-2 border-dashed p-12 text-center rounded-lg cursor-pointer transition-colors ".concat(K?"border-green-400 bg-green-50":"border-green-300 hover:border-green-400 hover:bg-green-50"),children:[(0,n.jsx)("input",{...U()}),(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC4"}),(0,n.jsx)("p",{className:"text-xl font-medium text-green-600 mb-2",children:"\uD83D\uDCDA DIN-Norm PDF hier hochladen"}),(0,n.jsx)("p",{className:"text-green-500",children:"Wird automatisch verarbeitet und in die Wissensdatenbank integriert"})]}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"\uD83D\uDCCB Verf\xfcgbare DIN-Normen"}),0===f.length?(0,n.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,n.jsx)("p",{className:"text-yellow-800",children:"Noch keine DIN-Normen hochgeladen. Laden Sie Ihre erste DIN-Norm hoch, um mit der automatischen Pr\xfcfung zu beginnen."})}):(0,n.jsx)("div",{className:"space-y-2",children:f.map((e,s)=>(0,n.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-medium text-gray-800",children:e.filename}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:[E(e.file_size)," • ",e.upload_time?new Date(e.upload_time).toLocaleDateString("de-DE"):"Unbekannt"]})]}),(0,n.jsx)("button",{onClick:()=>z(e.filename),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"\uD83D\uDDD1️ L\xf6schen"})]},s))})]})]}),!y&&(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-2xl mr-3",children:"❌"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-red-800",children:"Fehler"}),(0,n.jsx)("p",{className:"text-red-700",children:d})]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:(0,n.jsxs)("div",{...L(),className:"border-2 border-dashed p-12 text-center rounded-lg cursor-pointer transition-colors ".concat(K?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"),children:[(0,n.jsx)("input",{...U()}),(0,n.jsx)("div",{className:"text-6xl mb-4",children:e?"⏳":"\uD83D\uDCCB"}),(0,n.jsx)("p",{className:"text-xl font-medium text-gray-700 mb-2",children:e?"Bauplan wird verarbeitet...":"Bauplan PDF hier hochladen"}),(0,n.jsx)("p",{className:"text-gray-500",children:e?"Bitte warten - KI-Analyse l\xe4uft...":"Drag & Drop oder klicken zum Ausw\xe4hlen (max. 50MB)"}),e&&(0,n.jsx)("div",{className:"mt-4 bg-blue-100 rounded-lg p-3",children:(0,n.jsx)("div",{className:"animate-pulse text-blue-600",children:"\uD83E\uDD16 KI analysiert Ihren Bauplan..."})})]})}),t&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"\uD83D\uDCCA Analyse-Ergebnis"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-lg mb-3 text-gray-700",children:"\uD83D\uDCC4 Plan-Info"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Datei:"})," ",t.original_filename]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Gr\xf6\xdfe:"})," ",E(t.file_size)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Seiten:"})," ",t.page_count]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Text-L\xe4nge:"})," ",t.text_length," Zeichen"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Upload:"})," ",new Date(t.upload_time).toLocaleString("de-DE")]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-lg mb-3 text-gray-700",children:"\uD83C\uDFAF Status"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),(0,n.jsx)("span",{children:"PDF analysiert"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-3 h-3 rounded-full mr-2 ".concat(t.din_check?"bg-green-500":"bg-yellow-500")}),(0,n.jsxs)("span",{children:["DIN-Pr\xfcfung ",t.din_check?"abgeschlossen":"ausstehend"]})]})]})]})]}),(0,n.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[!t.din_check&&(0,n.jsx)("button",{onClick:()=>I(t.id),disabled:u===t.id,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 transition-colors",children:u===t.id?"⏳ Pr\xfcfe gegen DIN...":"\uD83D\uDCCB Gegen DIN-Normen pr\xfcfen"}),(0,n.jsx)("button",{onClick:()=>p(t),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"\uD83D\uDCCA Details anzeigen"}),(0,n.jsx)("button",{onClick:()=>N(t.id),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCAC Feedback geben"})]})]}),x.length>0&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"\uD83D\uDDC2️ Vorherige Analysen"}),(0,n.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,n.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-medium text-lg",children:e.original_filename}),(0,n.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[E(e.file_size)," • ",e.page_count," Seiten • ",new Date(e.upload_time).toLocaleDateString("de-DE")]}),(0,n.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,n.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat(e.din_check?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.din_check?"✅ DIN-gepr\xfcft":"⏳ DIN-Pr\xfcfung ausstehend"}),"processing"===e.status&&(0,n.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"\uD83D\uDD04 Wird gepr\xfcft..."}),u===e.id&&(0,n.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"\uD83D\uDD04 Wird gepr\xfcft..."})]})]}),(0,n.jsxs)("div",{className:"flex space-x-2 ml-4",children:[!e.din_check&&(0,n.jsx)("button",{onClick:()=>I(e.id),disabled:u===e.id,className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:opacity-50 transition-colors",children:u===e.id?"⏳ Wird gepr\xfcft":"\uD83D\uDCCB Wird gepr\xfcft..."}),(0,n.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 transition-colors",children:"\uD83D\uDCCA Details"}),(0,n.jsx)("button",{onClick:()=>N(e.id),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition-colors",children:"\uD83D\uDCAC Feedback"}),(0,n.jsx)("button",{onClick:()=>F(e.id),className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"\uD83D\uDDD1️ L\xf6schen"})]})]})},e.id))})]})]}),j&&(0,n.jsx)(c,{planId:j,onSubmit:S,onClose:()=>N(null)}),b&&(0,n.jsx)(o,{plan:b,onClose:()=>p(null),onFeedback:()=>{N(b.id),p(null)}})]})})}function c(e){let{planId:s,onSubmit:t,onClose:l}=e,[r,i]=(0,a.useState)(5),[c,d]=(0,a.useState)(!0),[o,m]=(0,a.useState)("");return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-6",children:"\uD83D\uDCAC Feedback geben"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(s,{rating:r,correct_plan:c,comments:o,feedback_type:"user_evaluation"})},className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bewertung (1-10)"}),(0,n.jsx)("input",{type:"range",min:"1",max:"10",value:r,onChange:e=>i(parseInt(e.target.value)),className:"w-full"}),(0,n.jsxs)("div",{className:"text-center text-lg font-semibold text-blue-600",children:[r,"/10"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Analyse korrekt?"}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",checked:c,onChange:()=>d(!0),className:"mr-2"}),"✅ Ja, korrekt"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",checked:!c,onChange:()=>d(!1),className:"mr-2"}),"❌ Nein, fehlerhaft"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Kommentare"}),(0,n.jsx)("textarea",{value:o,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded-lg",rows:4,placeholder:"Optionale Anmerkungen zur Analyse..."})]}),(0,n.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,n.jsx)("button",{type:"submit",className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"\uD83D\uDCBE Feedback speichern"}),(0,n.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"❌ Abbrechen"})]})]})]})})}function d(e){var s;let{dinCheck:t}=e;if(!t)return null;let a=e=>{switch(null==e?void 0:e.toLowerCase()){case"erf\xfcllt":case"gut":return"text-green-600 bg-green-50";case"mangelhaft":case"problematisch":return"text-red-600 bg-red-50";case"akzeptabel":case"befriedigend":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}};return(0,n.jsxs)("div",{className:"space-y-6",children:[t.technical_compliance&&(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h5",{className:"font-semibold text-lg mb-3 text-blue-800",children:"\uD83D\uDD27 Technische Compliance"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"Gesamtbewertung:"}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(a(t.technical_compliance.overall_compliance)),children:t.technical_compliance.overall_compliance})]}),void 0!==t.technical_compliance.score&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"Score:"}),(0,n.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((s=t.technical_compliance.score)>=8?"text-green-600 bg-green-100":s>=6?"text-yellow-600 bg-yellow-100":s>=4?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100"),children:[t.technical_compliance.score.toFixed(1),"/10"]})]})]}),t.technical_compliance.din_checks&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h6",{className:"font-medium text-blue-700 mb-2",children:"\uD83D\uDCCB DIN-Standard Pr\xfcfungen:"}),Object.entries(t.technical_compliance.din_checks).map(e=>{let[s,t]=e;return(0,n.jsxs)("div",{className:"bg-white p-3 rounded border mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"font-medium text-sm",children:t.standard}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a(t.compliance)),children:t.compliance})]}),t.issues&&t.issues.length>0&&(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("strong",{className:"text-red-600 text-xs",children:"Probleme:"}),(0,n.jsx)("ul",{className:"text-xs text-red-600 ml-4",children:t.issues.map((e,s)=>(0,n.jsxs)("li",{children:["• ",e]},s))})]}),t.recommendations&&t.recommendations.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{className:"text-blue-600 text-xs",children:"Empfehlungen:"}),(0,n.jsx)("ul",{className:"text-xs text-blue-600 ml-4",children:t.recommendations.map((e,s)=>(0,n.jsxs)("li",{children:["• ",e]},s))})]})]},s)})]}),t.technical_compliance.critical_issues&&t.technical_compliance.critical_issues.length>0&&(0,n.jsxs)("div",{className:"bg-red-50 border border-red-200 p-3 rounded mb-4",children:[(0,n.jsx)("h6",{className:"font-medium text-red-700 mb-2",children:"\uD83D\uDEA8 Kritische Punkte:"}),(0,n.jsx)("ul",{className:"text-sm text-red-600",children:t.technical_compliance.critical_issues.map((e,s)=>(0,n.jsxs)("li",{children:["• ",e]},s))})]}),t.technical_compliance.recommendations&&t.technical_compliance.recommendations.length>0&&(0,n.jsxs)("div",{className:"bg-green-50 border border-green-200 p-3 rounded",children:[(0,n.jsx)("h6",{className:"font-medium text-green-700 mb-2",children:"\uD83D\uDCA1 Empfehlungen:"}),(0,n.jsx)("ul",{className:"text-sm text-green-600",children:t.technical_compliance.recommendations.map((e,s)=>(0,n.jsxs)("li",{children:["• ",e]},s))})]})]}),t.text_based_analysis&&(0,n.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,n.jsx)("h5",{className:"font-semibold text-lg mb-3 text-green-800",children:"\uD83D\uDCDD Text-basierte DIN-Analyse"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"Gesamtbewertung:"}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(a(t.text_based_analysis.gesamtbewertung)),children:t.text_based_analysis.gesamtbewertung})]}),t.text_based_analysis.normen_gefunden&&(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"DIN-Normen gefunden:"}),(0,n.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-medium",children:t.text_based_analysis.normen_gefunden})]}),t.text_based_analysis.gpt_model&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"AI-Model:"}),(0,n.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm font-medium",children:t.text_based_analysis.gpt_model})]})]}),(0,n.jsx)("div",{children:t.text_based_analysis.top_normen&&t.text_based_analysis.top_normen.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h6",{className:"font-medium text-green-700 mb-2",children:"\uD83C\uDFC6 Relevante Normen:"}),(0,n.jsx)("ul",{className:"text-sm text-green-600",children:[...new Set(t.text_based_analysis.top_normen)].map((e,s)=>(0,n.jsxs)("li",{className:"bg-green-100 px-2 py-1 rounded mb-1",children:["• ",String(e)]},s))})]})})]}),t.text_based_analysis.erfuellte_anforderungen&&t.text_based_analysis.erfuellte_anforderungen.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h6",{className:"font-medium text-green-700 mb-2",children:"✅ Erf\xfcllte Anforderungen:"}),(0,n.jsx)("div",{className:"space-y-2",children:t.text_based_analysis.erfuellte_anforderungen.map((e,s)=>(0,n.jsxs)("div",{className:"bg-green-100 p-2 rounded text-sm",children:[(0,n.jsxs)("strong",{children:[e.norm,":"]})," ",e.anforderung," - ",e.bemerkung]},s))})]}),t.text_based_analysis.moegliche_verstoesse&&t.text_based_analysis.moegliche_verstoesse.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h6",{className:"font-medium text-red-700 mb-2",children:"⚠️ M\xf6gliche Verst\xf6\xdfe:"}),(0,n.jsx)("div",{className:"space-y-2",children:t.text_based_analysis.moegliche_verstoesse.map((e,s)=>(0,n.jsxs)("div",{className:"bg-red-100 p-2 rounded text-sm",children:[(0,n.jsxs)("strong",{children:[e.norm,":"]})," ",e.anforderung," - ",e.bemerkung]},s))})]}),t.text_based_analysis.kritische_punkte&&t.text_based_analysis.kritische_punkte.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h6",{className:"font-medium text-red-700 mb-2",children:"\uD83D\uDEA8 Kritische Punkte:"}),(0,n.jsx)("div",{className:"space-y-2",children:t.text_based_analysis.kritische_punkte.map((e,s)=>(0,n.jsxs)("div",{className:"bg-red-100 p-2 rounded text-sm",children:[(0,n.jsxs)("strong",{children:[e.kritischer_punkt,":"]})," ",e.bemerkung]},s))})]}),t.text_based_analysis.empfehlungen&&t.text_based_analysis.empfehlungen.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h6",{className:"font-medium text-blue-700 mb-2",children:"\uD83D\uDCA1 Empfehlungen:"}),(0,n.jsx)("div",{className:"space-y-2",children:t.text_based_analysis.empfehlungen.map((e,s)=>(0,n.jsxs)("div",{className:"bg-blue-100 p-2 rounded text-sm",children:[(0,n.jsx)("strong",{children:"Empfehlung:"})," ",e.empfehlung]},s))})]}),t.text_based_analysis.anwendbare_normen&&t.text_based_analysis.anwendbare_normen.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h6",{className:"font-medium text-blue-700 mb-2",children:"\uD83D\uDCDA Anwendbare Normen:"}),(0,n.jsx)("div",{className:"space-y-2",children:t.text_based_analysis.anwendbare_normen.map((e,s)=>(0,n.jsxs)("div",{className:"bg-blue-50 p-2 rounded text-sm",children:[(0,n.jsxs)("strong",{children:[e.norm,":"]}),e.referenz&&(0,n.jsx)("a",{href:e.referenz,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-2",children:"\uD83D\uDCCE Referenz"})]},s))})]}),t.text_based_analysis.timestamp&&(0,n.jsxs)("div",{className:"mt-4 text-xs text-gray-500 border-t pt-2",children:["Analyse durchgef\xfchrt: ",new Date(t.text_based_analysis.timestamp).toLocaleString("de-DE")]})]}),t.analysis_type&&(0,n.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium text-gray-700",children:"\uD83D\uDCCA Analyse-Typ:"}),(0,n.jsx)("span",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:t.analysis_type})]}),t.timestamp&&(0,n.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Pr\xfcfung abgeschlossen: ",new Date(t.timestamp).toLocaleString("de-DE")]})]})]})}function o(e){var s;let{plan:t,onClose:a,onFeedback:l}=e;return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,n.jsx)("h3",{className:"text-2xl font-bold",children:"\uD83D\uDCCA Plan-Details"}),(0,n.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,n.jsx)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsx)("h4",{className:"font-semibold text-lg mb-3",children:"\uD83D\uDCC4 Datei-Informationen"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Original Name:"})," ",t.original_filename]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Dateigr\xf6\xdfe:"})," ",t.file_size?"".concat((t.file_size/1024/1024).toFixed(2)," MB"):"Unbekannt"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Seitenzahl:"})," ",t.page_count]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Text-L\xe4nge:"})," ",t.text_length," Zeichen"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Upload-Zeit:"})," ",t.upload_time&&"Invalid Date"!==t.upload_time?new Date(t.upload_time).toLocaleString("de-DE"):"Unbekannt"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Status:"})," ",(0,n.jsx)("span",{className:"capitalize",children:null==(s=t.status)?void 0:s.replace("_"," ")})]})]})]})}),t.din_check&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"font-semibold text-lg mb-3",children:"\uD83D\uDCCF DIN-Normen Pr\xfcfung"}),(0,n.jsx)(d,{dinCheck:t.din_check})]}),t.feedback&&t.feedback.length>0&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"font-semibold text-lg mb-3",children:"\uD83D\uDCAC Feedback Historie"}),(0,n.jsx)("div",{className:"space-y-3",children:t.feedback.map((e,s)=>(0,n.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("span",{className:"font-medium",children:["Bewertung: ",e.rating,"/10"]}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:e.timestamp?new Date(e.timestamp).toLocaleString("de-DE"):"Kein Datum"})]}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("strong",{children:"Korrekt:"})," ",e.correct_plan?"✅ Ja":"❌ Nein"]}),e.comments&&(0,n.jsxs)("div",{className:"text-sm mt-2",children:[(0,n.jsx)("strong",{children:"Kommentar:"})," ",e.comments]})]},s))})]}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("button",{onClick:l,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"\uD83D\uDCAC Feedback hinzuf\xfcgen"}),(0,n.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"✕ Schlie\xdfen"})]})]})})}},4010:(e,s,t)=>{Promise.resolve().then(t.bind(t,1057))}},e=>{var s=s=>e(e.s=s);e.O(0,[567,441,684,358],()=>s(4010)),_N_E=e.O()}]);